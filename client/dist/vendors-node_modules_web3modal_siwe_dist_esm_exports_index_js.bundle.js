"use strict";
(self["webpackChunkclient"] = self["webpackChunkclient"] || []).push([["vendors-node_modules_web3modal_siwe_dist_esm_exports_index_js"],{

/***/ "./node_modules/@web3modal/siwe/dist/esm/core/controller/SIWEController.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@web3modal/siwe/dist/esm/core/controller/SIWEController.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SIWEController: () => (/* binding */ SIWEController)
/* harmony export */ });
/* harmony import */ var valtio_vanilla_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! valtio/vanilla/utils */ "./node_modules/valtio/esm/vanilla/utils.mjs");
/* harmony import */ var valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! valtio/vanilla */ "./node_modules/valtio/esm/vanilla.mjs");
/* harmony import */ var _web3modal_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @web3modal/core */ "./node_modules/@web3modal/core/dist/esm/index.js");



const state = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.proxy)({
    status: 'uninitialized'
});
const SIWEController = {
    state,
    subscribeKey(key, callback) {
        return (0,valtio_vanilla_utils__WEBPACK_IMPORTED_MODULE_2__.subscribeKey)(state, key, callback);
    },
    subscribe(callback) {
        return (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.subscribe)(state, () => callback(state));
    },
    _getClient() {
        if (!state._client) {
            throw new Error('SIWEController client not set');
        }
        return state._client;
    },
    async getNonce(address) {
        const client = this._getClient();
        const nonce = await client.getNonce(address);
        this.setNonce(nonce);
        return nonce;
    },
    async getSession() {
        try {
            const client = this._getClient();
            const session = await client.getSession();
            if (session) {
                this.setSession(session);
                this.setStatus('success');
            }
            return session;
        }
        catch {
            return undefined;
        }
    },
    createMessage(args) {
        const client = this._getClient();
        const message = client.createMessage(args);
        this.setMessage(message);
        return message;
    },
    async verifyMessage(args) {
        const client = this._getClient();
        const isValid = await client.verifyMessage(args);
        return isValid;
    },
    async signIn() {
        const client = this._getClient();
        const session = await client.signIn();
        return session;
    },
    async signOut() {
        const client = this._getClient();
        await client.signOut();
        this.setStatus('ready');
        this.setSession(undefined);
        client.onSignOut?.();
    },
    onSignIn(args) {
        const client = this._getClient();
        client.onSignIn?.(args);
    },
    onSignOut() {
        const client = this._getClient();
        client.onSignOut?.();
    },
    setSIWEClient(client) {
        state._client = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.ref)(client);
        state.status = 'ready';
        _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.OptionsController.setIsSiweEnabled(client.options.enabled);
    },
    setNonce(nonce) {
        state.nonce = nonce;
    },
    setStatus(status) {
        state.status = status;
    },
    setMessage(message) {
        state.message = message;
    },
    setSession(session) {
        state.session = session;
        state.status = session ? 'success' : 'ready';
    }
};
//# sourceMappingURL=SIWEController.js.map

/***/ }),

/***/ "./node_modules/@web3modal/siwe/dist/esm/core/helpers/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@web3modal/siwe/dist/esm/core/helpers/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAddressFromMessage: () => (/* binding */ getAddressFromMessage),
/* harmony export */   getChainIdFromMessage: () => (/* binding */ getChainIdFromMessage),
/* harmony export */   verifySignature: () => (/* binding */ verifySignature)
/* harmony export */ });
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/utils */ "./node_modules/@walletconnect/utils/dist/index.es.js");

const ETH_ADDRESS_PATTERN = /0x[a-fA-F0-9]{40}/u;
const ETH_CHAIN_ID_IN_SIWE_PATTERN = /Chain ID: (?<temp1>\d+)/u;
function getAddressFromMessage(message) {
    return message.match(ETH_ADDRESS_PATTERN)?.[0] || '';
}
function getChainIdFromMessage(message) {
    return `eip155:${message.match(ETH_CHAIN_ID_IN_SIWE_PATTERN)?.[1] || 1}`;
}
async function verifySignature({ address, message, signature, chainId, projectId }) {
    let isValid = (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_0__.isValidEip191Signature)(address, message, signature);
    if (!isValid) {
        isValid = await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_0__.isValidEip1271Signature)(address, message, signature, chainId, projectId);
    }
    return isValid;
}
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@web3modal/siwe/dist/esm/core/utils/ConstantsUtil.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@web3modal/siwe/dist/esm/core/utils/ConstantsUtil.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ConstantsUtil: () => (/* binding */ ConstantsUtil)
/* harmony export */ });
const ConstantsUtil = {
    FIVE_MINUTES_IN_MS: 300000
};
//# sourceMappingURL=ConstantsUtil.js.map

/***/ }),

/***/ "./node_modules/@web3modal/siwe/dist/esm/core/utils/TypeUtils.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@web3modal/siwe/dist/esm/core/utils/TypeUtils.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);

//# sourceMappingURL=TypeUtils.js.map

/***/ }),

/***/ "./node_modules/@web3modal/siwe/dist/esm/exports/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@web3modal/siwe/dist/esm/exports/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SIWEController: () => (/* reexport safe */ _core_controller_SIWEController_js__WEBPACK_IMPORTED_MODULE_3__.SIWEController),
/* harmony export */   W3mConnectingSiwe: () => (/* reexport safe */ _scaffold_partials_w3m_connecting_siwe_index_js__WEBPACK_IMPORTED_MODULE_5__.W3mConnectingSiwe),
/* harmony export */   W3mConnectingSiweView: () => (/* reexport safe */ _scaffold_views_w3m_connecting_siwe_view_index_js__WEBPACK_IMPORTED_MODULE_6__.W3mConnectingSiweView),
/* harmony export */   createSIWEConfig: () => (/* binding */ createSIWEConfig),
/* harmony export */   formatMessage: () => (/* reexport safe */ _walletconnect_utils__WEBPACK_IMPORTED_MODULE_2__.formatMessage),
/* harmony export */   getAddressFromMessage: () => (/* reexport safe */ _core_helpers_index_js__WEBPACK_IMPORTED_MODULE_1__.getAddressFromMessage),
/* harmony export */   getChainIdFromMessage: () => (/* reexport safe */ _core_helpers_index_js__WEBPACK_IMPORTED_MODULE_1__.getChainIdFromMessage),
/* harmony export */   getDidAddress: () => (/* reexport safe */ _walletconnect_utils__WEBPACK_IMPORTED_MODULE_2__.getDidAddress),
/* harmony export */   getDidChainId: () => (/* reexport safe */ _walletconnect_utils__WEBPACK_IMPORTED_MODULE_2__.getDidChainId),
/* harmony export */   verifySignature: () => (/* reexport safe */ _core_helpers_index_js__WEBPACK_IMPORTED_MODULE_1__.verifySignature)
/* harmony export */ });
/* harmony import */ var _src_client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../src/client.js */ "./node_modules/@web3modal/siwe/dist/esm/src/client.js");
/* harmony import */ var _core_helpers_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/helpers/index.js */ "./node_modules/@web3modal/siwe/dist/esm/core/helpers/index.js");
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/utils */ "./node_modules/@walletconnect/utils/dist/index.es.js");
/* harmony import */ var _core_controller_SIWEController_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/controller/SIWEController.js */ "./node_modules/@web3modal/siwe/dist/esm/core/controller/SIWEController.js");
/* harmony import */ var _core_utils_TypeUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/utils/TypeUtils.js */ "./node_modules/@web3modal/siwe/dist/esm/core/utils/TypeUtils.js");
/* harmony import */ var _scaffold_partials_w3m_connecting_siwe_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../scaffold/partials/w3m-connecting-siwe/index.js */ "./node_modules/@web3modal/siwe/dist/esm/scaffold/partials/w3m-connecting-siwe/index.js");
/* harmony import */ var _scaffold_views_w3m_connecting_siwe_view_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../scaffold/views/w3m-connecting-siwe-view/index.js */ "./node_modules/@web3modal/siwe/dist/esm/scaffold/views/w3m-connecting-siwe-view/index.js");





function createSIWEConfig(siweConfig) {
    return new _src_client_js__WEBPACK_IMPORTED_MODULE_0__.Web3ModalSIWEClient(siweConfig);
}


//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@web3modal/siwe/dist/esm/scaffold/partials/w3m-connecting-siwe/index.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@web3modal/siwe/dist/esm/scaffold/partials/w3m-connecting-siwe/index.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W3mConnectingSiwe: () => (/* binding */ W3mConnectingSiwe)
/* harmony export */ });
/* harmony import */ var _web3modal_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @web3modal/ui */ "./node_modules/@web3modal/ui/dist/esm/index.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _styles_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles.js */ "./node_modules/@web3modal/siwe/dist/esm/scaffold/partials/w3m-connecting-siwe/styles.js");
/* harmony import */ var _web3modal_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @web3modal/core */ "./node_modules/@web3modal/core/dist/esm/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




let W3mConnectingSiwe = class W3mConnectingSiwe extends lit__WEBPACK_IMPORTED_MODULE_1__.LitElement {
    constructor() {
        super(...arguments);
        this.dappImageUrl = _web3modal_core__WEBPACK_IMPORTED_MODULE_3__.OptionsController.state.metadata?.icons;
        this.walletImageUrl = _web3modal_core__WEBPACK_IMPORTED_MODULE_3__.StorageUtil.getConnectedWalletImageUrl();
    }
    firstUpdated() {
        const visuals = this.shadowRoot?.querySelectorAll('wui-visual-thumbnail');
        if (visuals?.[0]) {
            this.createAnimation(visuals[0], 'translate(18px)');
        }
        if (visuals?.[1]) {
            this.createAnimation(visuals[1], 'translate(-18px)');
        }
    }
    render() {
        return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html) `
      <wui-visual-thumbnail
        ?borderRadiusFull=${true}
        .imageSrc=${this.dappImageUrl?.[0]}
      ></wui-visual-thumbnail>
      <wui-visual-thumbnail .imageSrc=${this.walletImageUrl}></wui-visual-thumbnail>
    `;
    }
    createAnimation(element, translation) {
        element.animate([{ transform: 'translateX(0px)' }, { transform: translation }], {
            duration: 1600,
            easing: 'cubic-bezier(0.56, 0, 0.48, 1)',
            direction: 'alternate',
            iterations: Infinity
        });
    }
};
W3mConnectingSiwe.styles = _styles_js__WEBPACK_IMPORTED_MODULE_2__["default"];
W3mConnectingSiwe = __decorate([
    (0,_web3modal_ui__WEBPACK_IMPORTED_MODULE_0__.customElement)('w3m-connecting-siwe')
], W3mConnectingSiwe);

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@web3modal/siwe/dist/esm/scaffold/partials/w3m-connecting-siwe/styles.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@web3modal/siwe/dist/esm/scaffold/partials/w3m-connecting-siwe/styles.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,lit__WEBPACK_IMPORTED_MODULE_0__.css) `
  :host {
    display: flex;
    justify-content: center;
    gap: var(--wui-spacing-2xl);
  }

  wui-visual-thumbnail:nth-child(1) {
    z-index: 1;
  }
`);
//# sourceMappingURL=styles.js.map

/***/ }),

/***/ "./node_modules/@web3modal/siwe/dist/esm/scaffold/views/w3m-connecting-siwe-view/index.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@web3modal/siwe/dist/esm/scaffold/views/w3m-connecting-siwe-view/index.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W3mConnectingSiweView: () => (/* binding */ W3mConnectingSiweView)
/* harmony export */ });
/* harmony import */ var _web3modal_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @web3modal/core */ "./node_modules/@web3modal/core/dist/esm/index.js");
/* harmony import */ var _web3modal_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @web3modal/ui */ "./node_modules/@web3modal/ui/dist/esm/index.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit/decorators.js */ "./node_modules/lit/decorators.js");
/* harmony import */ var _core_controller_SIWEController_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/controller/SIWEController.js */ "./node_modules/@web3modal/siwe/dist/esm/core/controller/SIWEController.js");
/* harmony import */ var _web3modal_wallet__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @web3modal/wallet */ "./node_modules/@web3modal/wallet/dist/esm/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






let W3mConnectingSiweView = class W3mConnectingSiweView extends lit__WEBPACK_IMPORTED_MODULE_2__.LitElement {
    constructor() {
        super(...arguments);
        this.dappName = _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.OptionsController.state.metadata?.name;
        this.isSigning = false;
        this.isCancelling = false;
    }
    render() {
        this.onRender();
        return (0,lit__WEBPACK_IMPORTED_MODULE_2__.html) `
      <wui-flex justifyContent="center" .padding=${['2xl', '0', 'xxl', '0']}>
        <w3m-connecting-siwe></w3m-connecting-siwe>
      </wui-flex>
      <wui-flex
        .padding=${['0', '4xl', 'l', '4xl']}
        gap="s"
        justifyContent="space-between"
      >
        <wui-text variant="paragraph-500" align="center" color="fg-100"
          >${this.dappName ?? 'Dapp'} needs to connect to your wallet</wui-text
        >
      </wui-flex>
      <wui-flex
        .padding=${['0', '3xl', 'l', '3xl']}
        gap="s"
        justifyContent="space-between"
      >
        <wui-text variant="small-400" align="center" color="fg-200"
          >Sign this message to prove you own this wallet and proceed. Canceling will disconnect
          you.</wui-text
        >
      </wui-flex>
      <wui-flex .padding=${['l', 'xl', 'xl', 'xl']} gap="s" justifyContent="space-between">
        <wui-button
          size="lg"
          borderRadius="xs"
          fullWidth
          variant="neutral"
          ?loading=${this.isCancelling}
          @click=${this.onCancel.bind(this)}
          data-testid="w3m-connecting-siwe-cancel"
        >
          Cancel
        </wui-button>
        <wui-button
          size="lg"
          borderRadius="xs"
          fullWidth
          variant="main"
          @click=${this.onSign.bind(this)}
          ?loading=${this.isSigning}
          data-testid="w3m-connecting-siwe-sign"
        >
          ${this.isSigning ? 'Signing...' : 'Sign'}
        </wui-button>
      </wui-flex>
    `;
    }
    onRender() {
        if (_core_controller_SIWEController_js__WEBPACK_IMPORTED_MODULE_4__.SIWEController.state.session) {
            _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.ModalController.close();
        }
    }
    async onSign() {
        this.isSigning = true;
        _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.EventsController.sendEvent({
            event: 'CLICK_SIGN_SIWE_MESSAGE',
            type: 'track',
            properties: {
                network: _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.NetworkController.state.caipNetwork?.id || '',
                isSmartAccount: _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.AccountController.state.preferredAccountType ===
                    _web3modal_wallet__WEBPACK_IMPORTED_MODULE_5__.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT
            }
        });
        try {
            _core_controller_SIWEController_js__WEBPACK_IMPORTED_MODULE_4__.SIWEController.setStatus('loading');
            const session = await _core_controller_SIWEController_js__WEBPACK_IMPORTED_MODULE_4__.SIWEController.signIn();
            _core_controller_SIWEController_js__WEBPACK_IMPORTED_MODULE_4__.SIWEController.setStatus('success');
            _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.EventsController.sendEvent({
                event: 'SIWE_AUTH_SUCCESS',
                type: 'track',
                properties: {
                    network: _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.NetworkController.state.caipNetwork?.id || '',
                    isSmartAccount: _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.AccountController.state.preferredAccountType ===
                        _web3modal_wallet__WEBPACK_IMPORTED_MODULE_5__.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT
                }
            });
            return session;
        }
        catch (error) {
            const preferredAccountType = _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.AccountController.state.preferredAccountType;
            const isSmartAccount = preferredAccountType === _web3modal_wallet__WEBPACK_IMPORTED_MODULE_5__.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT;
            if (isSmartAccount) {
                _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.SnackController.showError('This application might not support Smart Accounts');
            }
            else {
                _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.SnackController.showError('Signature declined');
            }
            _core_controller_SIWEController_js__WEBPACK_IMPORTED_MODULE_4__.SIWEController.setStatus('error');
            return _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.EventsController.sendEvent({
                event: 'SIWE_AUTH_ERROR',
                type: 'track',
                properties: {
                    network: _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.NetworkController.state.caipNetwork?.id || '',
                    isSmartAccount
                }
            });
        }
        finally {
            this.isSigning = false;
        }
    }
    async onCancel() {
        this.isCancelling = true;
        const isConnected = _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.AccountController.state.isConnected;
        if (isConnected) {
            await _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.ConnectionController.disconnect();
            _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.ModalController.close();
        }
        else {
            _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.RouterController.push('Connect');
        }
        this.isCancelling = false;
        _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.EventsController.sendEvent({
            event: 'CLICK_CANCEL_SIWE',
            type: 'track',
            properties: {
                network: _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.NetworkController.state.caipNetwork?.id || '',
                isSmartAccount: _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.AccountController.state.preferredAccountType ===
                    _web3modal_wallet__WEBPACK_IMPORTED_MODULE_5__.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT
            }
        });
    }
};
__decorate([
    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_3__.state)()
], W3mConnectingSiweView.prototype, "isSigning", void 0);
__decorate([
    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_3__.state)()
], W3mConnectingSiweView.prototype, "isCancelling", void 0);
W3mConnectingSiweView = __decorate([
    (0,_web3modal_ui__WEBPACK_IMPORTED_MODULE_1__.customElement)('w3m-connecting-siwe-view')
], W3mConnectingSiweView);

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@web3modal/siwe/dist/esm/src/client.js":
/*!*************************************************************!*\
  !*** ./node_modules/@web3modal/siwe/dist/esm/src/client.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Web3ModalSIWEClient: () => (/* binding */ Web3ModalSIWEClient)
/* harmony export */ });
/* harmony import */ var _web3modal_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @web3modal/core */ "./node_modules/@web3modal/core/dist/esm/index.js");
/* harmony import */ var _web3modal_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @web3modal/common */ "./node_modules/@web3modal/common/dist/esm/index.js");
/* harmony import */ var _core_utils_ConstantsUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/utils/ConstantsUtil.js */ "./node_modules/@web3modal/siwe/dist/esm/core/utils/ConstantsUtil.js");



class Web3ModalSIWEClient {
    constructor(siweConfig) {
        const { enabled = true, nonceRefetchIntervalMs = _core_utils_ConstantsUtil_js__WEBPACK_IMPORTED_MODULE_2__.ConstantsUtil.FIVE_MINUTES_IN_MS, sessionRefetchIntervalMs = _core_utils_ConstantsUtil_js__WEBPACK_IMPORTED_MODULE_2__.ConstantsUtil.FIVE_MINUTES_IN_MS, signOutOnAccountChange = true, signOutOnDisconnect = true, signOutOnNetworkChange = true, ...siweConfigMethods } = siweConfig;
        this.options = {
            enabled,
            nonceRefetchIntervalMs,
            sessionRefetchIntervalMs,
            signOutOnDisconnect,
            signOutOnAccountChange,
            signOutOnNetworkChange
        };
        this.methods = siweConfigMethods;
    }
    async getNonce(address) {
        const nonce = await this.methods.getNonce(address);
        if (!nonce) {
            throw new Error('siweControllerClient:getNonce - nonce is undefined');
        }
        return nonce;
    }
    async getMessageParams() {
        return ((await this.methods.getMessageParams?.()) || {});
    }
    createMessage(args) {
        const message = this.methods.createMessage(args);
        if (!message) {
            throw new Error('siweControllerClient:createMessage - message is undefined');
        }
        return message;
    }
    async verifyMessage(args) {
        const isValid = await this.methods.verifyMessage(args);
        return isValid;
    }
    async getSession() {
        const session = await this.methods.getSession();
        if (!session) {
            throw new Error('siweControllerClient:getSession - session is undefined');
        }
        return session;
    }
    async signIn() {
        const address = _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.AccountController.state.address;
        const nonce = await this.methods.getNonce(address);
        if (!address) {
            throw new Error('An address is required to create a SIWE message.');
        }
        const chainId = _web3modal_common__WEBPACK_IMPORTED_MODULE_1__.NetworkUtil.caipNetworkIdToNumber(_web3modal_core__WEBPACK_IMPORTED_MODULE_0__.NetworkController.state.caipNetwork?.id);
        if (!chainId) {
            throw new Error('A chainId is required to create a SIWE message.');
        }
        const messageParams = await this.getMessageParams?.();
        const message = this.methods.createMessage({
            address: `eip155:${chainId}:${address}`,
            chainId,
            nonce,
            version: '1',
            iat: messageParams?.iat || new Date().toISOString(),
            ...messageParams
        });
        const type = _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.StorageUtil.getConnectedConnector();
        if (type === 'AUTH') {
            _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.RouterController.pushTransactionStack({
                view: null,
                goBack: false,
                replace: true,
                onCancel() {
                    _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.RouterController.replace('ConnectingSiwe');
                }
            });
        }
        const signature = await _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.ConnectionController.signMessage(message);
        const isValid = await this.methods.verifyMessage({ message, signature });
        if (!isValid) {
            throw new Error('Error verifying SIWE signature');
        }
        const session = await this.methods.getSession();
        if (!session) {
            throw new Error('Error verifying SIWE signature');
        }
        if (this.methods.onSignIn) {
            this.methods.onSignIn(session);
        }
        _web3modal_core__WEBPACK_IMPORTED_MODULE_0__.RouterUtil.navigateAfterNetworkSwitch();
        return session;
    }
    async signOut() {
        this.methods.onSignOut?.();
        return this.methods.signOut();
    }
}
//# sourceMappingURL=client.js.map

/***/ })

}]);
//# sourceMappingURL=vendors-node_modules_web3modal_siwe_dist_esm_exports_index_js.bundle.js.map